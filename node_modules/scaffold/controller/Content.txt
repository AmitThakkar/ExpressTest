"use strict";

var ResponseStatus = require("../src/enum/ResponseStatus");

exports.allowedMethods = {
    "get": ["GET"],
    "list": ["GET"],
    "delete": ["GET", "DELETE"],
    "save": ["POST"],
    "update": ["PUT", "POST"]
};

exports.dependencies = {
    {{domainName}}Service: ""
};

exports.actions = {
    get: function (request, response) {
        exports.dependencies.{{domainName}}Service.get(request.param("id"))
            .on(ResponseStatus.ERROR, function () {
                var body = "Error Occur, Please try later.";
                response.writeHead(500, {"Content-Length": body.length, "Content-Type": "text/plain" });
                response.end(body);
            })
            .on(ResponseStatus.NOT_FOUND, function () {
                var body = "{{domainName}} not found with Id -> " + request.param("id");
                response.writeHead(204, {"Content-Length": body.length, "Content-Type": "text/plain" });
                response.end(body);
            })
            .on(ResponseStatus.SUCCESS, function ({{domainNameInSmallLetter}}) {
                var body = JSON.stringify({{domainNameInSmallLetter}});
                response.writeHead(200, {"Content-Length": body.length, "Content-Type": "text/plain" });
                response.end(body);
            });
    },
    delete: function (request, response) {
        exports.dependencies.{{domainName}}Service.delete(request.param("id"))
            .on(ResponseStatus.ERROR, function () {
                var body = "Error Occur, Please try later.";
                response.writeHead(500, {"Content-Length": body.length, "Content-Type": "text/plain" });
                response.end(body);
            })
            .on(ResponseStatus.NOT_FOUND, function () {
                var body = "{{domainName}} not found with Id -> " + request.param("id");
                response.writeHead(204, {"Content-Length": body.length, "Content-Type": "text/plain" });
                response.end(body);
            })
            .on(ResponseStatus.SUCCESS, function () {
                var body = "{{domainName}} Deleted, id -> " + request.query.id;
                response.writeHead(200, {"Content-Length": body.length, "Content-Type": "text/plain" });
                response.end(body);
            });
    },
    save: function (request, response) {
        var {{domainNameInSmallLetter}}CO = {{newDocument}};
        exports.dependencies.{{domainName}}Service.save({{domainNameInSmallLetter}}CO)
            .on(ResponseStatus.ERROR, function () {
                var body = "Error Occur, Please try later.";
                response.writeHead(500, {"Content-Length": body.length, "Content-Type": "text/plain" });
                response.end(body);
            })
            .on(ResponseStatus.SUCCESS, function ({{domainNameInSmallLetter}}) {
                var body = JSON.stringify({{domainNameInSmallLetter}});
                response.writeHead(201, {"Content-Length": body.length, "Content-Type": "text/plain" });
                response.end(body);
            })
            .on(ResponseStatus.NOT_SAVED, function () {
                var body = "{{domainName}} not saved";
                response.writeHead(203, {"Content-Length": body.length, "Content-Type": "text/plain" });
                response.end(body);
            });
    },
    update: function (request, response) {
        var {{domainNameInSmallLetter}}CO = {{updatedDocument}};
        exports.dependencies.{{domainName}}Service.update({{domainNameInSmallLetter}}CO)
            .on(ResponseStatus.ERROR, function () {
                var body = "Error Occur, Please try later.";
                response.writeHead(500, {"Content-Length": body.length, "Content-Type": "text/plain" });
                response.end(body);
            })
            .on(ResponseStatus.NOT_FOUND, function () {
                var body = "{{domainName}} not found with Id -> " + {{domainNameInSmallLetter}}CO._id;
                response.writeHead(204, {"Content-Length": body.length, "Content-Type": "text/plain" });
                response.end(body);
            })
            .on(ResponseStatus.SUCCESS, function () {
                var body = "{{domainName}} Updated, content -> " + JSON.stringify({{domainNameInSmallLetter}}CO);
                response.writeHead(202, {"Content-Length": body.length, "Content-Type": "text/plain" });
                response.end(body);
            });
    },
    list: function (request, response) {
        exports.dependencies.{{domainName}}Service.list(request.param("max"), request.param("offset"))
            .on(ResponseStatus.ERROR, function () {
                var body = "Error Occur, Please try later.";
                response.writeHead(500, {"Content-Length": body.length, "Content-Type": "text/plain" });
                response.end(body);
            })
            .on(ResponseStatus.NOT_FOUND, function () {
                var body = "{{domainName}} not found with Max and offset -> " + request.query.max + " And " + request.query.offset;
                response.writeHead(204, {"Content-Length": body.length, "Content-Type": "text/plain" });
                response.end(body);
            })
            .on(ResponseStatus.SUCCESS, function ({{domainNameInSmallLetter}}s) {
                var body = JSON.stringify({{domainNameInSmallLetter}}s);
                response.writeHead(200, {"Content-Length": body.length, "Content-Type": "text/plain" });
                response.end(body);
            });
    }
};