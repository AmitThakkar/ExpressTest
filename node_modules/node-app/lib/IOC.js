exports.initializeApplication = function () {
    var application = this;
    var fs = require('fs');
    var _ = require('underscore');
    var depedencies = {};
    fs.readdir("./domain", function (error, domainFileNames) {
        if (error) {
            console.log("Error occur at the time of reading Services");
        } else if (domainFileNames && domainFileNames.length > 0) {
            domainFileNames.forEach(function (domain) {
                depedencies[/(.*)(.js)/g.exec(domain)[1]] = require("../../../domain/" + domain);
            });
        }
        fs.readdir("./service", function (error, serviceFileNames) {
            if (error) {
                console.log("Error occur at the time of reading Services");
            } else if (serviceFileNames && serviceFileNames.length > 0) {
                serviceFileNames.forEach(function (service) {
                    depedencies[/(.*)(.js)/g.exec(service)[1]] = require("../../../service/" + service);
                });
                serviceFileNames.forEach(function (service) {
                    _.each(service.dependencies, function (value, dependency) {
                        service.dependencies[dependency] = depedencies[dependency];
                    });
                });
            }
            fs.readdir("./controller", function (error, controllerFileNames) {
                if (error) {
                    console.log("Error Occur at the time of reading Controllers");
                } else if (controllerFileNames && controllerFileNames.length > 0) {
                    controllerFileNames.forEach(function (controller) {
                        var controllerName = /(.*)(Controller)/.exec(controller)[1];
                        var controller = require("../../../controller/" + controller);
                        _.each(controller.actions, function (handler, actionName) {
                            controller.allowedMethods[actionName].forEach(function (methodName) {
                                application[methodName.toLowerCase()]('/' + controllerName + "/" + actionName, handler);
                            });
                        });
                        _.each(controller.dependencies, function (value, dependency) {
                            controller.dependencies[dependency] = depedencies[dependency];
                        });
                    });
                } else {
                    console.log("No Controller found");
                }
            });
        });
    });
};